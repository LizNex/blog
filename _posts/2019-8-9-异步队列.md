---
layout: post
title: "Event loop"
subtitle: ""
date: 2018-09-27 12:00:00
author: "左手喝水"
header-img: "img/post-bg-2015.jpg"
tags:
  - js
---

## Event loop

js中有宏任务和微任务；
宏任务放入宏任务队列，微任务放入微任务队列；宏任务创建微任务，宏任务执行完毕后寻找微任务队列执行完后再去执行下一个宏任务
微任务：`Promise process.nextTick MutaionObserver`  
宏任务：`script(整体代码)、setTimeout、setInterval、I/O、UI交互事件、postMessage、MessageChannel、setImmediate(Node.js 环境)`  

任务执行顺序：执行栈执行宏任务或从任务队列中获取->宏任务->包含的微任务->宏任务->包含的为微任务->（Event loop）  
宏任务中包含微任务的情况，执行了宏任务之后会把包含的微任务都执行完成再进行下一个宏任务执行
await await跟着的表达式会先执行一遍，之后的代码会放到微任务里面等待执行
宏任务执行完毕会让浏览器重新渲染，微任务不会

参考：

MDN-事件循环：<https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop>  
掘金-Event loop但规范和实现:<https://juejin.im/post/5a6155126fb9a01cb64edb45>  
掘金-这一次，彻底弄懂 JavaScript 执行机制：<https://juejin.im/post/59e85eebf265da430d571f89>  
前端一百题-异步:<https://github.com/Advanced-Frontend/Daily-Interview-Question/issues/7>
