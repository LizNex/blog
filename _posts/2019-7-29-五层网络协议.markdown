---
layout: post
title: "网络传输"
subtitle: ""
date: 2019-07-29 12:00:00
author: "左手喝水"
header-img: "img/post-bg-2015.jpg"
tags:
  - 网络
---

从客户端发出 http 请求到服务器接收，中间会经过一系列的流程。 简括就是：

- 从应用层的发送 http 请求
- 到传输层通过三次握手建立 tcp/ip 连接
- 再到网络层的 ip 寻址
- 再到数据链路层的封装成帧，找到目标mac地址
- 最后到物理层的利用物理介质传输。

| 五层网络架构（TCP/IP）                    | 七层网络架构(OSI) |
| -----------------------------------------  | ----------------- |
| 应用层(dns,http)                            | 应用层            |
| 传输层(tcp,udp) 建立 tcp 连接（三次握手）      | 表示层            |
| 网络层(IP) IP 寻址                      | 会话层            |
| 数据链路层(ARP)                             | 传输层            |
| 物理层                                     | 网络层            |
| /                                         | 数据链路层        |
| /                                         | 物理层            |

应用层  
协议：HTTP、DNS  
作用：HTTP约定传输的文件格式、DNS寻找传输对象的IP地址给到下一层。DNS查询IP，查找顺序为：1）DNS Cache 2）本地host 3）DNS服务器(UDP协议，端口53)

传输层  
协议：TCP、UDP  
作用：将应用层的数据根据传输规则传输给目标，例如TCP是3次握手、4次挥手来保证传输质量，UDP直接将内容传输给对方

网络层  
协议：IP  
作用：根据目标IP地址（DNS获得的）查询路由表指定传输路径

数据链路层  
协议：以太协议，arp协议  
作用：arp协议通过IP地址获得mac地址，从而得知目标主机。  
arp协议原理:  在局域网中把目标IP地址广播，局域网中如果有目标主机怎么告诉arp mac地址，其他非目标主机则保持沉默。通过这个过程获得目标主机mac地址

物理层  
作用：把所有获得的数据转换成0、1数字信息传输

如果是HTTPS协议在应用层和网络层还会夹一层SSL/TSL层验证请求安全性，具体参考HTTPS协议

参考：  
知乎-arp协议: <https://zhuanlan.zhihu.com/p/28771785>
知乎-车小胖: <https://www.zhihu.com/question/34873227/answer/518086565>  
知乎-如何形象地理解计算机网络中的物理层/数据链路层/网络层？:<https://www.zhihu.com/question/29949319>  
