---
layout: post
title: "浏览器渲染流程"
subtitle: ""
date: 2019-07-29 12:00:00
author: "左手喝水"
header-img: "img/post-bg-2015.jpg"
tags:
  - 浏览器
---
## 浏览器渲染流程

![浏览器渲染流程](/blog/img/in-post/浏览器渲染流程/flow.png){:height="70%" width="70%"}

<center style="color:#999"> 浏览器渲染流程 </center>

### 流程

根据上图应该就能清楚渲染流程  
简单来说就是:

* html编译后生成dom树
* css编译后生成css规则  
* 两者交融生成渲染树，生成渲染树的时候会根据dom树和css规则重新计算布局  
* 绘制渲染树
* 显示在屏幕上  


### 重绘

重绘则是css改变但不影响文档流终端位置会触发重绘，也就是css规则重新编译和dom交融，但不影响位置所以不用重新布局，直接绘制显示就好

### 重排

重p排则是解构、或位置发生改变相关的元素都需要重新排列。也就是说重新走一遍浏览器渲染流程。

一些常用且会导致回流的情况：

* 页面首次渲染
* 浏览器窗口大小发生改变
* 元素尺寸或位置发生改变
* 元素内容变化（文字数量或图片大小等等）
* 元素字体大小变化
* 添加或者删除可见的DOM元素
* 激活CSS伪类（例如：:hover）
* 查询某些属性或调用某些方法

一些常用且会导致回流的属性和方法：

* clientWidth、clientHeight、clientTop、clientLeft
* offsetWidth、offsetHeight、offsetTop、offsetLeft
* scrollWidth、scrollHeight、scrollTop、scrollLeft
* scrollIntoView()、scrollIntoViewIfNeeded()
* getComputedStyle()
* getBoundingClientRect()
* scrollTo()

### 其他

  css动画同样可能引起重排，根据变换的属性来决定

参考：
掘金-浏览器的回流与重绘 (Reflow & Repaint): <https://juejin.im/post/5a9923e9518825558251c96a>